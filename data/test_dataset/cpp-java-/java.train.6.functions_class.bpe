DifferencesIterator ( RangeDifference [ ] differenceRanges ) { fArray = differenceRanges ; fIndex = 0 ; fRange = new ArrayList ( ) ; if ( fIndex < fArray . length ) fDifference = fArray [ fIndex ++ ] ; else fDifference = null ; }
int getCount ( ) { return fRange . size ( ) ; }
void next ( ) { fRange . add ( fDifference ) ; if ( fDifference != null ) { if ( fIndex < fArray . length ) fDifference = fArray [ fIndex ++ ] ; else fDifference = null ; } }
DifferencesIterator other ( DifferencesIterator right , DifferencesIterator left ) { if ( this == right ) return left ; return right ; }
void removeAll ( ) { fRange . clear ( ) ; }
public Object generate ( Client < ? > client , String dataType ) { final String generatedId = " Select ▁ now ( ) ▁ from ▁ system . schema _ columns " ; ResultSet rSet = ( ( DSClient ) client ) . execute ( generatedId , null ) ; UUID uuid = rSet . iterator ( ) . next ( ) . getUUID ( 0 ) ; return uuid ; }
@ Before public void setUp ( ) { cx = Context . enter ( ) ; cx . setLanguageVersion ( Context . VERSION_1_8 ) ; }
@ After public void tearDown ( ) { Context . exit ( ) ; }
private AstRoot parse ( CharSequence cs ) { CompilerEnvirons compilerEnv = new CompilerEnvirons ( ) ; compilerEnv . initFromContext ( cx ) ; ErrorReporter compilationErrorReporter = compilerEnv . getErrorReporter ( ) ; Parser p = new Parser ( compilerEnv , compilationErrorReporter ) ; return p . parse ( cs . toString ( ) , " < eval > " , 1 ) ; }
private String toSource ( CharSequence cs ) { return parse ( cs ) . toSource ( ) ; }
@ Test public void testToSource ( ) { assertEquals ( " debugger ; \n " , toSource ( " debugger " ) ) ; assertEquals ( " debugger ; \n " , toSource ( " debugger ; " ) ) ; assertEquals ( " debugger ; \n " , toSource ( " debugger ; \n " ) ) ; }
ConnectionThread ( BluetoothSocket socket , Handler handler ) { super ( ) ; mBluetoothSocket = socket ; mHandler = handler ; try { mInStream = mBluetoothSocket . getInputStream ( ) ; mOutStream = mBluetoothSocket . getOutputStream ( ) ; } catch ( IOException e ) { } }
public void run ( ) { byte [ ] buffer = new byte [ 1024 ] ; int bytes ; while ( true ) { try { bytes = mInStream . read ( buffer ) ; String data = new String ( buffer , 0 , bytes ) ; mHandler . obtainMessage ( DataTransfer@@ Activity . DATA_RECE@@ IVED , data ) . sendToTarget ( ) ; } catch ( IOException e ) { break ; } } }
public void write ( byte [ ] bytes ) { try { mOutStream . write ( bytes ) ; } catch ( IOException e ) { } }
public BigtableResultScannerAdapter ( ResponseAdapter < Row , Result > rowAdapter ) { this . rowAdapter = rowAdapter ; }
public ResultScanner adapt ( final com . google . cloud . bigtable . grpc . scanner . ResultScanner < Row > bigtableResultScanner ) { return new AbstractClientScanner ( ) { @ Override public Result next ( ) throws IOException { Row row = bigtableResultScanner . next ( ) ; if ( row == null ) { return null ; } return rowAdapter . adaptResponse ( row ) ; } @ Override public void close ( ) { try { bigtableResultScanner . close ( ) ; } catch ( IOException ioe ) { throw Throwables . propagate ( ioe ) ; } } } ; }
public ContactGroupRssImpl ( String groupName , ProtocolProviderServiceRssImpl parentProvider ) { this . groupName = groupName ; this . uid = groupName + UID_SUFFIX ; this . parentProvider = parentProvider ; }
public boolean canContain@@ Subgroups ( ) { return true ; }
public ProtocolProviderService getProtocolProvider ( ) { return parentProvider ; }
public Iterator < Contact > contacts ( ) { return contacts . iterator ( ) ; }
public void addContact ( ContactRssImpl contactToAdd ) { this . contacts . add ( contactToAdd ) ; contactToAdd . setParentGroup ( this ) ; }
public int countContacts ( ) { return contacts . size ( ) ; }
public int countSubgroups ( ) { return subGroups . size ( ) ; }
public void addSubgroup ( ContactGroupRssImpl subgroup ) { this . subGroups . add ( subgroup ) ; subgroup . setParentGroup ( this ) ; }
void setParentGroup ( ContactGroupRssImpl parent ) { this . parentGroup = parent ; }
public ContactGroup getParentContactGroup ( ) { return this . parentGroup ; }
public void removeSubGroup ( ContactGroupRssImpl subgroup ) { this . subGroups . remove ( subgroup ) ; subgroup . setParentGroup ( null ) ; }
public ContactGroupRssImpl findGroupParent ( ContactGroupRssImpl rssGroup ) { if ( subGroups . contains ( rssGroup ) ) return this ; Iterator < ContactGroup > subGroupsIter = subgroups ( ) ; while ( subGroupsIter . hasNext ( ) ) { ContactGroupRssImpl subgroup = ( ContactGroupRssImpl ) subGroupsIter . next ( ) ; ContactGroupRssImpl parent = subgroup . findGroupParent ( rssGroup ) ; if ( parent != null ) return parent ; } return null ; }
public ContactGroupRssImpl findContactParent ( ContactRssImpl rssContact ) { if ( contacts . contains ( rssContact ) ) return this ; Iterator < ContactGroup > subGroupsIter = subgroups ( ) ; while ( subGroupsIter . hasNext ( ) ) { ContactGroupRssImpl subgroup = ( ContactGroupRssImpl ) subGroupsIter . next ( ) ; ContactGroupRssImpl parent = subgroup . findContactParent ( rssContact ) ; if ( parent != null ) return parent ; } return null ; }
public Contact getContact ( String id ) { Iterator < Contact > contactsIter = contacts ( ) ; while ( contactsIter . hasNext ( ) ) { ContactRssImpl contact = ( ContactRssImpl ) contactsIter . next ( ) ; if ( contact . getAddress ( ) . equals ( id ) ) return contact ; } return null ; }
public ContactGroup getGroup ( int index ) { return subGroups . get ( index ) ; }
public ContactGroup getGroup ( String groupName ) { Iterator < ContactGroup > groupsIter = subgroups ( ) ; while ( groupsIter . hasNext ( ) ) { ContactGroupRssImpl contactGroup = ( ContactGroupRssImpl ) groupsIter . next ( ) ; if ( contactGroup . getGroupName ( ) . equals ( groupName ) ) return contactGroup ; } return null ; }
public String getGroupName ( ) { return this . groupName ; }
public void setGroupName ( String newGrpName ) { this . groupName = newGrpName ; }
public Iterator < ContactGroup > subgroups ( ) { return subGroups . iterator ( ) ; }
public void removeContact ( ContactRssImpl contact ) { this . contacts . remove ( contact ) ; }
public ContactRssImpl findContactByID ( String id ) { Iterator < Contact > contactsIter = contacts ( ) ; while ( contactsIter . hasNext ( ) ) { ContactRssImpl mContact = ( ContactRssImpl ) contactsIter . next ( ) ; if ( mContact . getAddress ( ) . equals ( id ) ) return mContact ; } Iterator < ContactGroup > groupsIter = subgroups ( ) ; while ( groupsIter . hasNext ( ) ) { ContactGroupRssImpl mGroup = ( ContactGroupRssImpl ) groupsIter . next ( ) ; ContactRssImpl mContact = mGroup . findContactByID ( id ) ; if ( mContact != null ) return mContact ; } return null ; }
public String toString ( ) { StringBuffer buff = new StringBuffer ( getGroupName ( ) ) ; buff . append ( " . subGroups = " + countSubgroups ( ) + " : \n " ) ; Iterator < ContactGroup > subGroups = subgroups ( ) ; while ( subGroups . hasNext ( ) ) { ContactGroupRssImpl group = ( ContactGroupRssImpl ) subGroups . next ( ) ; buff . append ( group . toString ( ) ) ; if ( subGroups . hasNext ( ) ) buff . append ( " \n " ) ; } buff . append ( " \n ChildContacts = " + countContacts ( ) + " : [ " ) ; Iterator < Contact > contacts = contacts ( ) ; while ( contacts . hasNext ( ) ) { ContactRssImpl contact = ( ContactRssImpl ) contacts . next ( ) ; buff . append ( contact . toString ( ) ) ; if ( contacts . hasNext ( ) ) buff . append ( " , ▁ " ) ; } return buff . append ( " ] " ) . toString ( ) ; }
public void getRssURLList ( List < ContactRssImpl > rssURLList ) { Iterator < ContactGroup > subGroups = subgroups ( ) ; while ( subGroups . hasNext ( ) ) { ContactGroupRssImpl group = ( ContactGroupRssImpl ) subGroups . next ( ) ; group . getRssURLList ( rssURLList ) ; } Iterator < Contact > contacts = contacts ( ) ; while ( contacts . hasNext ( ) ) { ContactRssImpl contact = ( ContactRssImpl ) contacts . next ( ) ; rssURLList . add ( contact ) ; } }
public void setPersistent ( boolean isPersistent ) { this . isPersistent = isPersistent ; }
public boolean isPersistent ( ) { return isPersistent ; }
public String getPersistentData ( ) { return null ; }
public boolean isResolved ( ) { return isResolved ; }
public void setResolved ( boolean resolved ) { this . isResolved = resolved ; }
public String getUID ( ) { return uid ; }
public boolean equals ( Object obj ) { if ( obj == null || ! ( obj instanceof ContactGroupRssImpl ) ) return false ; ContactGroupRssImpl rssGroup = ( ContactGroupRssImpl ) obj ; if ( ! rssGroup . getGroupName ( ) . equals ( getGroupName ( ) ) || ! rssGroup . getUID ( ) . equals ( getUID ( ) ) || rssGroup . countContacts ( ) != countContacts ( ) || rssGroup . countSubgroups ( ) != countSubgroups ( ) ) return false ; Iterator < Contact > theirContacts = rssGroup . contacts ( ) ; while ( theirContacts . hasNext ( ) ) { ContactRssImpl theirContact = ( ContactRssImpl ) theirContacts . next ( ) ; ContactRssImpl ourContact = ( ContactRssImpl ) getContact ( theirContact . getAddress ( ) ) ; if ( ourContact == null || ! ourContact . equals ( theirContact ) ) return false ; } Iterator < ContactGroup > theirSubgroups = rssGroup . subgroups ( ) ; while ( theirSubgroups . hasNext ( ) ) { ContactGroupRssImpl theirSubgroup = ( ContactGroupRssImpl ) theirSubgroups . next ( ) ; ContactGroupRssImpl ourSubgroup = ( ContactGroupRssImpl ) getGroup ( theirSubgroup . getGroupName ( ) ) ; if ( ourSubgroup == null || ! ourSubgroup . equals ( theirSubgroup ) ) return false ; } return true ; }
i ++ ) { final ScriptContext context = contexts [ i ] = new SimpleScriptContext ( ) ; final Bindings b = e . createBindings ( ) ; context . setBindings ( b , ScriptContext . ENGINE_SCOPE ) ; assertEquals ( e . eval ( " var ▁ foo ▁ = ▁ ' " + i + " ' ; " , context ) , null ) ; }
i ++ ) { final ScriptContext context = contexts [ i ] ; assertEquals ( e . eval ( sharedScript , context ) , String . valueOf ( i ) ) ; }
i ++ ) { final ScriptContext context = contexts [ i ] = new SimpleScriptContext ( ) ; final Bindings b = e . createBindings ( ) ; context . setBindings ( b , ScriptContext . ENGINE_SCOPE ) ; assertEquals ( e . eval ( " let ▁ foo ▁ = ▁ ' " + i + " ' ; " , context ) , null ) ; }
i ++ ) { final ScriptContext context = contexts [ i ] ; assertEquals ( e . eval ( sharedScript , context ) , String . valueOf ( i ) ) ; }
i ++ ) { assertEquals ( e . eval ( sharedSetterScript ) , 1 ) ; assertEquals ( e . eval ( sharedGetterScript ) , 1 ) ; assertEquals ( e . eval ( " delete ▁ foo ; ▁ a " + i + " ▁ = ▁ 1 ; ▁ foo ▁ = ▁ " + i + " ; " ) , i ) ; assertEquals ( e . eval ( sharedGetterScript ) , i ) ; }
i ++ ) { assertEquals ( e . eval ( sharedSetterScript ) , 1 ) ; assertEquals ( e . eval ( sharedGetterScript ) , 1 ) ; assertEquals ( e . eval ( " delete ▁ foo ; ▁ a " + i + " ▁ = ▁ 1 ; ▁ Object . prototype . foo ▁ = ▁ " + i + " ; " ) , i ) ; assertEquals ( e . eval ( sharedGetterScript ) , i ) ; }
ScriptRunner ( final ScriptEngine engine , final ScriptContext context , final String source , final Object expected , final int iterations ) { this . engine = engine ; this . context = context ; this . source = source ; this . expected = expected ; this . iterations = iterations ; }
public void run ( ) { try { for ( int i = 0 ; i < iterations ; i ++ ) { assertEquals ( engine . eval ( source , context ) , expected ) ; } } catch ( final ScriptException se ) { throw new RuntimeException ( se ) ; } }
